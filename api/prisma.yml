endpoint: ${env:PRISMA_ENDPOINT}
secret: ${env:PRISMA_SECRET}
datamodel: datamodel.graphql
generate:
  - generator: typescript-client
    output: ./src/generated/prisma-client/
hooks:
  post-deploy:
    # Generate the nexus code from the newly generated prisma-client code
    # Removes the `nexus-prisma.ts` file that doesn't get used and has a bunch of type errors
    - yarn prisma:post-deploy
    # Format all the code. This can't be combine in the above command (using &&) for some reason since the generated
    # files won't get formatted that way
    - yarn --cwd .. format
# Seeds initial data into the database by running a script.
seed:
  run: yarn ts-node ./seeds/index.ts
